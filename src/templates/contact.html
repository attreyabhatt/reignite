{% extends "base.html" %}
{% block content %}
<div class="container py-3">
  <div class="row justify-content-center">
    <div class="col-md-7 col-lg-6">
      <h2 class="mb-4">Contact Us</h2>

      {% if submitted %}
        <div class="alert alert-success text-center" role="alert">
          <h4 class="alert-heading">Thank you!</h4>
          <p>Your message has been sent. Weâ€™ll get back to you via email soon.</p>
        </div>
      {% else %}

        {# --- Error summary (optional) --- #}
        {% if errors %}
          <div class="alert alert-danger" role="alert">
            <strong>Please fix the following:</strong>
            <ul class="mb-0">
              {% for field, msgs in errors.items %}
                {% for msg in msgs %}
                  <li>{{ msg }}</li>
                {% endfor %}
              {% endfor %}
            </ul>
          </div>
        {% endif %}

        <form method="post" class="card p-4 shadow-sm" novalidate>
          {% csrf_token %}

          <div class="mb-3">
            <label for="reason" class="form-label">Reason</label>
            <select
              class="form-select{% if errors.reason %} is-invalid{% endif %}"
              id="reason"
              name="reason"
              required
            >
              <option value="">Select reason</option>
              <option value="bug"      {% if form.reason == "bug" %}selected{% endif %}>Bug Report</option>
              <option value="payment"  {% if form.reason == "payment" %}selected{% endif %}>Payments</option>
              <option value="feedback" {% if form.reason == "feedback" %}selected{% endif %}>Feedback</option>
              <option value="other"    {% if form.reason == "other" %}selected{% endif %}>Other</option>
            </select>
            {% if errors.reason %}<div class="invalid-feedback">{{ errors.reason.0 }}</div>{% endif %}
          </div>

          <div class="mb-3">
            <label for="title" class="form-label">Title</label>
            <input
              type="text"
              class="form-control{% if errors.title %} is-invalid{% endif %}"
              id="title"
              name="title"
              maxlength="100"
              required
              value="{{ form.title|default:'' }}"
            >
            {% if errors.title %}<div class="invalid-feedback">{{ errors.title.0 }}</div>{% endif %}
          </div>

          <div class="mb-3">
            <label for="subject" class="form-label">Subject</label>
            <textarea
              class="form-control{% if errors.subject %} is-invalid{% endif %}"
              id="subject"
              name="subject"
              rows="4"
              required
            >{{ form.subject|default:'' }}</textarea>
            {% if errors.subject %}<div class="invalid-feedback">{{ errors.subject.0 }}</div>{% endif %}
          </div>

          <div class="mb-3">
            <label for="email" class="form-label">Email address</label>
            <input
              type="email"
              class="form-control{% if errors.email %} is-invalid{% endif %}"
              id="email"
              name="email"
              required
              value="{{ form.email|default:'' }}"
            >
            {% if errors.email %}<div class="invalid-feedback">{{ errors.email.0 }}</div>{% endif %}
          </div>

          {# --- Honeypot: leave empty; bots will fill it --- #}
          <div style="position: absolute; left: -10000px;" aria-hidden="true">
            <label for="website">Website</label>
            <input type="text" id="website" name="website" tabindex="-1" autocomplete="off">
          </div>

          <button type="submit" class="btn btn-dark w-100">Send Message</button>
        </form>
      {% endif %}
    </div>
  </div>
</div>
{% endblock %}
